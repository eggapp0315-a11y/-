<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>教師團隊網站</title>

    <!-- SEO -->
    <meta name="description" content="教師團隊網站，提供課程、課表、最新消息與會員系統。">
    <meta name="google-site-verification" content="qYZOcxRezo1JhvbCEADsiE4ow2B3GeXEmDgt--h3OPM">

    <!-- favicon -->
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">

    <!-- 共用 CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<!-- ======================
 Header / Navbar
====================== -->
<header>
    <h1>教師團隊網站</h1>

    <nav>
        <ul>
            <li><a href="{{ url_for('about') }}">關於我們</a></li>
            <li><a href="{{ url_for('contact') }}">聯絡我們</a></li>
            <li><a href="{{ url_for('teaching') }}">教學理念</a></li>
            <li><a href="{{ url_for('news') }}">最新消息</a></li>
            <li><a href="{{ url_for('class_page') }}">課表</a></li>
        </ul>

        <div>
            {% if session.get("user_id") %}
                <span class="welcome">歡迎 {{ session.get("role") }}！</span>

                {% if session.get("role") == "admin" %}
                    <a href="{{ url_for('admin_new_news') }}" class="login-btn">新增消息</a>
                    <a href="{{ url_for('admin_users') }}" class="login-btn">管理使用者</a>
                {% endif %}

                <a href="{{ url_for('logout') }}" class="login-btn">登出</a>
            {% else %}
                <button id="loginBtn" class="login-btn">登入</button>
                <a href="{{ url_for('register') }}" class="login-btn">註冊</a>
            {% endif %}
        </div>
    </nav>
</header>

<!-- ======================
 Hero / 輪播圖片
====================== -->
<section class="hero">
    <div class="slides">
        <img src="/static/image/math.jpg" class="active" loading="eager" alt="數學教學 1">
        <img src="/static/image/teach-photo.jpg" alt="數學教學 2">
        <img src="/static/image/teach-photo2.jpg" alt="數學教學 3">
    </div>

    <div class="hero-text">
        從基礎開始，輕鬆學習<br>
        上次更新：2026 / 01 / 19
    </div>
</section>

<!-- ======================
 主內容
====================== -->
<main class="container">
    <h2>請選擇年級與章節開始學習</h2>

    {% for grade in grades %}
        <section class="grade-section">
            <div class="grade-title">{{ grade.name }}</div>

            <ul class="lesson-list">
                {% for lesson in grade.lessons %}
                    <li>
                        <a href="/{{ grade.code }}/{{ lesson.topic }}">
                            {{ lesson.title }}
                        </a>
                    </li>
                {% endfor %}
            </ul>
        </section>
    {% endfor %}
</main>

<!-- ======================
 登入 Modal
====================== -->
<div id="loginModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>會員登入</h2>

        <form action="{{ url_for('login') }}" method="post">
            <label>
                帳號
                <input type="text" name="username" required>
            </label>

            <label>
                密碼
                <input type="password" name="password" required>
            </label>

            <button type="submit">登入</button>
        </form>

        <div class="register-link">
            還沒有帳號？
            <a href="{{ url_for('register') }}">註冊</a>
        </div>
    </div>
</div>

<!-- ======================
 JS：圖片輪播（不白畫面）
====================== -->
<script>
    let index = 0;
    const slides = document.querySelectorAll(".slides img");
    const total = slides.length;

    setInterval(() => {
        slides[index].classList.remove("active");
        index = (index + 1) % total; // 1 → 2 → 3 → 1
        slides[index].classList.add("active");
    }, 3000); // 5 秒切換（順、不刺眼）
</script>

<!-- ======================
 JS：登入視窗
====================== -->
<script>
    const modal = document.getElementById("loginModal");
    const btn = document.getElementById("loginBtn");
    const closeBtn = document.querySelector(".close");

    if (btn) {
        btn.onclick = () => modal.style.display = "block";
    }

    closeBtn.onclick = () => modal.style.display = "none";

    window.onclick = (e) => {
        if (e.target === modal) {
            modal.style.display = "none";
        }
    };
</script>

</body>
</html>
